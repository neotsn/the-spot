/*!
 * Motif Tabs v0.2.0 (2014-04-30)
 * Requires Motif Reveal
 * http://getmotif.com
 * 
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 * @todo Autogenerate Tabs Nav, add better History support, add better docs
 */
!function(a,b,c,d,e){"use strict";var f=function(b,c){return this.$elem=a(b),this.elem=this.$elem[0],this},g=b.location,h=a(c);f.counter=0,f.hashChangeBound=!1,f.onHashChange=!1,f.animationFrame="function"==typeof b.requestAnimFrame?!0:!1,f.prototype={defaults:{animate:!0,cssTransition:!0,speed:300,easing:"swing",history:!1,tabsGroup:".tabs__section",revealOptions:{type:"radio",activeClass:"is-current"}},init:function(a){return this.$elem.length?(this.initVars(a),this.bindEvents(),this.initReveal(),this):void 0},initVars:function(b){this.config=b,this.metadata=this.$elem.data("tabs-options"),this.options=a.extend(!0,{},this.defaults,this.config,this.metadata),this.$triggers=this.gatherTriggers.call(this),this.$tabs=this.$elem.find(this.options.tabsGroup).length?this.$elem.find(this.options.tabsGroup):this.$elem.find("nav + *"),this.group="tabs-group-"+f.counter,this.initialized=!1},gatherTriggers:function(){return this.$elem.find("nav a")},bindEvents:function(){var a=this;a.options.history&&(h.on("reveal/queue/done",function(){a.initialized=!0}),f.hashChangeBound||(b.onhashchange=function(){a.activateFromUrl.call(a)},f.hashChangeBound=!0))},activateFromUrl:function(){var b,c;f.onHashChange||(f.onHashChange=!0,b=""!==g.hash?a("[href='"+g.hash+"']"):!1,c=b.length?a.data(b[0],"reveal"):!1,c&&c.processTrigger.call(c),f.onHashChange=!1)},initReveal:function(){this.$triggers.reveal(this.createRevealConfig()),f.counter+=1},createRevealConfig:function(){var a=this;return a.options.revealOptions.target=function(){return a.gatherTargets.call(this)},a.options.revealOptions.onInit=function(){a.prepTabs.call(a,this)},a.options.revealOptions.onShow=function(b){a.options.history&&a.updateLocation.call(a,this),a.options.animate&&a.animateTabs.call(a,this)},a.options.revealOptions.beforeHide=function(b){a.options.history&&""===g.hash&&a.updateLocation.call(a,this),a.options.animate&&a.prepTransition.call(a,this)},a.options.revealOptions},gatherTargets:function(){var b=[];return b.push(a(this.$elem.attr("href"))),b},prepTabs:function(a){var b=this;b.createGroup.call(b,a),b.getCurrentTab.call(b,a),b.options.animate&&(b.options.cssTransition?b.$tabs.hasClass("transition-bound")||b.transitionEndCss():b.$tabs.addClass("no-transition"))},createGroup:function(a){return a.group=this.group,a.updateReference.call(a),a.group},getCurrentTab:function(c){var d=b.Reveal.queue,e=b.Reveal.groups,f=e[c.group].triggers[0];this.options.history&&g.hash===c.$elem.attr("href")?(a.inArray(f,d)>-1&&(d.splice(a.inArray(c.identity,d),1),b.Reveal.queue=d),c.setCurrent()):c.identity===f&&c.setCurrent()},transitionEndCss:function(a){var b=this;b.$tabs.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(a){a.originalEvent.target===b.$tabs[0]&&b.$tabs.removeAttr("style")}).addClass("transition-bound")},prepTransition:function(a){var b=a.reference.targets[0],c=this.$tabs.attr("style");c||this.$tabs.outerHeight(b.outerHeight())},updateLocation:function(a){this.initialized&&!f.onHashChange&&(f.onHashChange=!0,g.hash=a.$elem.attr("href"),f.onHashChange=!1)},animateTabs:function(a){var b=a.reference.targets[0],c=b.outerHeight();this.options.cssTransition?this.animateTabsCss(c):this.animateTabsJs(c)},animateTabsCss:function(a){var b=this;b.$tabs.outerHeight()!==a?f.animationFrame?requestAnimFrame(function(){b.$tabs.outerHeight(a)}):b.$tabs.outerHeight(a):b.$tabs.removeAttr("style")},animateTabsJs:function(a){var b=this;b.$tabs.stop().animate({height:a},b.options.speed,b.options.easing,function(){b.$tabs.removeAttr("style")})}},f.defaults=f.prototype.defaults,d.apps.Tabs=f}(jQuery,window,document,window.Motif=window.Motif||{utils:{},apps:{}}),$.createPlugin("tabs",window.Motif.apps.Tabs);