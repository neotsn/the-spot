/*!
 * Motif Herald v0.3.4
 * Fire off events depending on scroll position.
 * http://getmotif.com
 *
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 */
!function(a,b,c,d,e){"use strict";var f=function(b){return this.$window=a(b),this.window=this.$window[0],this};f.counter=0,f.prototype={defaults:{throttle:50,events:[]},init:function(a){return this.initVars(a),this.bind(!0),this},initVars:function(b){this.config=b,this.identity=this.config.group||"herald-"+f.counter,this.config.events=this.nameEvents(this.config.events),this.options=a.extend(!0,{},this.defaults,this.config),this.oldPosition=this.$window.scrollTop(),this.options.events=this.sortEvents(),this.spliceQueue=[],this.isTesting=!1,this.isSplicing=!1},bind:function(c){var d=this;d.$window.on("scroll."+d.identity,function(c,e){d.isSplicing||d.isTesting||(console.log("Testing"),"number"==typeof d.options.throttle&&(d.isTesting=!0,b.setTimeout(a.proxy(function(){this.isTesting=!1},d),d.options.throttle)),d.testAllEvents.call(d,e))}),d.$window.on("orientationchange."+d.identity+" resize."+d.identity,function(){d.isSplicing||d.isTesting||d.refresh.call(d)}),c&&d.refresh.call(d)},suspend:function(a){var b=a||this.identity;this.$window.off("scroll."+b),this.$window.off("resize."+b),this.$window.off("orientationchange."+b),this.suspendEvents(b)},suspendEvents:function(b){var c=this,d=b||c.identity,e=[];return a.each(c.options.events,function(a,b){b.name&&b.name===d&&(b.suspended=!0,e=e.concat(c.options.events.slice(a,a+1)))}),e},resume:function(){this.bind(!0),this.resumeEvents()},resumeEvents:function(b){var c=this,d=b||c.identity,e=[];return a.each(c.options.events,function(a,b){b.name&&b.name===d&&(b.suspended=!1,e=e.concat(c.options.events.slice(a,a+1)))}),e},refresh:function(){this.options.events=this.sortEvents(),this.oldPosition=0,this.$window.trigger("scroll."+this.identity,!0)},testAllEvents:function(a){var b,c=this,d=c.options.events,e=d.length,f="";if(this.currentPosition=this.$window.scrollTop(),a&&this.currentPosition===this.oldPosition&&(this.currentPosition+=1),f=this.getDirection(this.oldPosition,this.currentPosition),"down"===f)for(b=0;e>b;b+=1)this.testEvent(d[b],b,f);else if("up"===f)for(b=e-1;b>=0;b-=1)this.testEvent(d[b],b,f);this.spliceEvents(),this.oldPosition=this.currentPosition},testEvent:function(a,b,c){var d,e=!1;return a.suspended?!1:void(("undefined"==typeof a.fired||!a.fired||a.repeat)&&(d=a.persistent?this.triggerType(a):a.cache,e=this.testTrigger(d),e&&this.triggerEvent(b,c)))},triggerType:function(a){return"function"==typeof a.trigger?a.cache=a.trigger.call(this):a.cache=a.trigger},testTrigger:function(a){var b;return"boolean"==typeof a?a:(b=0>a?0:a,b<=this.currentPosition&&b>=this.oldPosition||b>=this.currentPosition&&b<=this.oldPosition?!0:!1)},triggerEvent:function(a,b){var c=this.options.events,d=c[a];d.event.call(this,b,this),d.fired=!0,d.repeat||this.spliceQueue.push(a)},spliceEvents:function(){this.isSplicing=!0,a.each(this.spliceQueue,a.proxy(function(a,b){this.options.events.splice(b,1)},this)),this.spliceQueue=[],this.isSplicing=!1},getDirection:function(a,b){var c,d=a||this.oldPosition,e=b||this.currentPosition;return e>=d?c="down":d>e&&(c="up"),c},nameEvents:function(b){var c=this;return a.each(b,function(a,b){b.name=c.identity}),b},sortEvents:function(){var a=this;return a.options.events=this.cacheEvents(),a.options.events.sort(),a.options.events},cacheEvents:function(){return a.each(this.options.events,a.proxy(function(a,b){this.triggerType(b)},this)),this.options.events},addToHerald:function(a){a.events&&a.events.length&&(this.identity=a.group||"herald-"+f.counter,a.events=this.nameEvents(a.events),this.options.events=this.supplementEvents(a.events),this.options.events=this.sortEvents(),this.bind())},supplementEvents:function(a,b){var c=b||this.options.events;return c.concat(a)}},f.defaults=f.prototype.defaults,d.apps.Herald=f,a.fn.herald=function(b){var c=arguments,d=this.length;return d?this.each(function(e){var g=a.data(this,"herald");if(g)if("undefined"==typeof b||"function"==typeof b)g.init(b);else if("object"==typeof b)g.addToHerald(b);else{if("string"==typeof b&&"function"==typeof g[b])return c=Array.prototype.slice.call(c,1),g[b].apply(g,c);console.log("Herald: Method "+b+" does not exist on jQuery.")}else c=Array.prototype.slice.call(c),g=a.data(this,"herald",new f(this)),g.init.apply(g,c);d-1===e&&(f.counter+=1)}):void 0}}(jQuery,window,document,window.Motif=window.Motif||{utils:{},apps:{}});