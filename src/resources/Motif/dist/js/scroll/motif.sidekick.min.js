/*!
 * Motif Sidekick v0.1.0
 * A basic sticky sidebar built on Motif Herald
 * http://getmotif.com
 * 
 * @author Jonathan Pacheco <jonathan@lifeblue.com>
 */
!function(a,b,c,d,e){"use strict";var f=function(b){this.$elem=a(b),this.elem=this.$elem[0]},g=a(c);f.counter=0,f.prototype={defaults:{context:!1,stickyClass:"is-sticky",stuckClass:"was-sticky",topOffset:null,bottomOffset:null,keepWidth:!0,minWidth:!1,window:a(b)},init:function(a){return this.$elem.length?(this.initVars.call(this,a),this.bindEvents.call(this),this.buildEvents.call(this),this.initHerald.call(this),f.counter+=1,this):void 0},initVars:function(b){this.config=b,this.metadata=this.$elem.data("sidekick-options"),this.options=a.extend(!0,{},this.defaults,this.config,this.metadata),this.options.context?this.$context=this.options.context:this.$context=this.$elem.parent(),this.identity=this.$elem.attr("id")||"sidekick-"+f.counter,this.$window=this.options.window,this.heraldEvents=[]},bindEvents:function(){var a=this;g.on("sidekick/"+a.identity+"/top",function(b,c){a.topEvent.call(a,c)}),g.on("sidekick/"+a.identity+"/bottom",function(b,c){a.bottomEvent.call(a,c)})},buildEvents:function(){var a=this,b={trigger:function(){return a.getTopPosition.call(a)},event:function(b){g.trigger("sidekick/"+a.identity+"/top",[b])},repeat:!0},c={trigger:function(){return a.getBottomPosition.call(a)},event:function(b){g.trigger("sidekick/"+a.identity+"/bottom",[b])},repeat:!0};return a.heraldEvents.push(b,c),a.heraldEvents},getTopPosition:function(){return"function"==typeof this.options.topOffset?this.options.topOffset.call(this):this.$context.offset().top},topEvent:function(a){var b=this.options.keepWidth?this.$elem.outerWidth():!1;this.options.minWidth&&this.$window.width()>=this.options.minWidth?"down"===a?this.stick.call(this,b):"up"===a&&this.unstick.call(this):this.unstick.call(this)},getBottomPosition:function(){return"function"==typeof this.options.bottomOffset?this.options.bottomOffset.call(this):this.$context.offset().top+this.$context.outerHeight()-this.$elem.outerHeight()},bottomEvent:function(a){var b=this.options.keepWidth?this.$elem.outerWidth():!1;this.options.minWidth&&this.$window.width()>=this.options.minWidth?"up"===a?this.stick.call(this,b):"down"===a&&this.stuck.call(this):this.unstick.call(this)},stick:function(a){a&&this.$elem.outerWidth(a),this.$context.addClass(this.options.stickyClass),this.$elem.removeClass(this.options.stuckClass).addClass(this.options.stickyClass)},unstick:function(){this.$context.removeClass(this.options.stickyClass),this.$elem.removeAttr("style").removeClass(this.options.stuckClass+" "+this.options.stickyClass)},stuck:function(){this.$elem.removeAttr("style").removeClass(this.options.stickyClass).addClass(this.options.stuckClass)},initHerald:function(){var a=this;a.$window.plugin("herald",{events:a.heraldEvents})}},f.defaults=f.prototype.defaults,d.apps.Sidekick=f}(jQuery,window,document,window.Motif=window.Motif||{utils:{},apps:{}}),$.createPlugin("sidekick",window.Motif.apps.Sidekick);